function addField(e){let t=e.previousElementSibling,n=t.previousElementSibling,l=n.previousElementSibling,i=l.previousElementSibling;var o=i.value,a=o.match(/\d+/)[0];if(a=parseInt(a)+1,""===n.previousElementSibling.value.trim())return toastr.error("Please enter a label/title for the label/title field."),!1;let s="field-"+a,u="";u+="<fieldset><legend>ID: "+s+"</legend>",u+='<div class="field input-group mb-4">',u+='<input type="hidden" name="fields[',u+=s+'][id]" value="'+s+'" required>',u+='<input type="text" class="form-control mx-2" name="fields[',u+=s+'][label]"',u+='placeholder = "Enter Input Field Label/Title (Required)"',u+="required > ",u+=' <input type="text" class="form-control mx-2" name="fields[',u+=s+'][placeholder]"',u+='placeholder = "Enter Input Field Description">',u+='<select class="form-select mx-2" name="fields[',u+=s+'][type]">',u+='<option value="input" selected>Input Field</option>',u+='<option value="textarea">Textarea Field</option>',u+="</select>",u+='<span onclick="addField(this)" class="btn btn-success">',u+='<i class="fa fa-btn fa-plus"></i>',u+="</span>",u+='<span onclick="removeField(this)"',u+=' class="btn btn-danger d-none">',u+='<i class="fa fa-btn fa-minus"></i>',u+="</span>",u+="</div>",u+="</fieldset>",$("#field-container").append(u),e.nextElementSibling.classList.remove("d-none"),e.classList.add("d-none"),createButton(s)}function removeField(e){let t=e.previousElementSibling,n=t.previousElementSibling,l=n.previousElementSibling,i=l.previousElementSibling,o=i.previousElementSibling;e.parentElement.parentElement.remove(),deleteButton(o.value)}function createButton(e){let t='<span onclick="insertText(this)" id="'+e+'-button" class="btn btn-success mx-2 my-2">'+e+"</span>";$("#field-buttons").append(t)}function deleteButton(e){let t=document.getElementById(e+"-button");t.remove()}function insertText(e){insertToPrompt(" ((`"+e.innerHTML+"`)) ")}function insertToPrompt(e){var t=document.getElementById("prompt").selectionStart;let n=$("#prompt").val();$("#prompt").val(n.slice(0,t)+e+n.slice(t))}$(document).ready(function(){$("#has_tone").is(":checked")&&createButton("output_tone"),$("#has_language").is(":checked")&&createButton("language"),$("#has_tone").on("change",function(){this.checked?createButton("output_tone"):deleteButton("output_tone")}),$("#has_language").on("change",function(){this.checked?createButton("language"):deleteButton("language")})});